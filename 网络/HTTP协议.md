## HTTP协议

- 一次完整的http请求

  - 1.对www.baidu.com这个网址进行DNS域名解析，得到对应的IP地址

    2.根据这个IP，找到对应的服务器，发起TCP的三次握手

    3.建立TCP连接后发起HTTP请求

    4.服务器响应HTTP请求，浏览器得到html代码

    5.浏览器解析html代码，并请求html代码中的资源（如js、css图片等）（先得到html代码，才能去找这些资源）

    6.浏览器对页面进行渲染呈现给用户

- get和post的请求

  (1)get将请求数据放在URL后面, 不安全; post将请求数据放在http请求体中, 相对于get来说是安全的.
  (2)get的数据是有限制的, post没有限制. get传输的数据量理论上比post要小.

  (3)浏览器会主动对get请求进行缓存, 而不会对post请求进行缓存.
  (4)get请求是幂等性的, post请求不是幂等性的.
      幂等性: 指一次或者多次请求某一个资源应该具有相同的副作用.并不是说每次获得的结果都是相同的, 可能会得到多                        次不同的结果, 但是请求本身是没有任何副作用的, 也就是不会改变资源的状态.
  (5) GET安全性非常低, POST安全性较高.   但是在不加密的情况下, 他们安全级别是一样的.

- http各版本的不同

  - ![1568684246838](C:\Users\侯泽明\AppData\Roaming\Typora\typora-user-images\1568684246838.png)
  - ![1568684271606](C:\Users\侯泽明\AppData\Roaming\Typora\typora-user-images\1568684271606.png)

- http请求报文和响应报文的格式

  - 请求报文
    - http请求报文由请求行, 请求头, 空行和请求数据(请求体)四部分组成.
  - 响应报文
    - http响应报文由四部分组成
      http状态码, http响应头, 空行, 响应数据四部分组成.
      (1)状态码
      描述了响应的状态.
      (2)http头部
      (3)空行. 用来分割头部和响应数据.
      (4)响应数据. 可以包含HTML代码, 图片等等. 主体是由传输在HTTP消息中紧跟在头部后面的数据组成.

- http的请求方法

  - (1)get
    用户获取服务器上特定的资源数据. get请求不安全, 会将用户输入的数据以
    参数名=参数值 的显示在浏览器地址栏, 拼接在要访问的URL之后.
    (2)post
    通常是用来提交表单输入的, 表单中的数据传输到服务器, post请求会将输入的数据放在http请求体中, 相对于get来说比较安全.
    (3)put
    与get从服务器获取数据相反, post是向服务器写入资源.
    (4)delete
    请求服务器删除指定URL处的资源.
    (5)head
    与get请求作用一致, 只不过head不会获取响应体. 可以在不必传输整个响应内容的情况下, 就获取包含在响应头中的数据.
    (6)options
    返回服务器指针特定资源所支持的http请求方法.
    (7)trace
    回显服务器收到的请求.

    (8)connect

    要求用隧道协议连接代理，组要用SSL和TLS把通信内容加密经网络隧道传输

- 状态码

  - (1) 1xx
    100 请求者应该继续请求. 表示服务器已经收到第一部分的请求, 请求者应该继续发送其余请求. (http1.1新)
    101  服务器将遵循请求者切换到另外一种协议.
    (2) 2xx
    200 表示服务器已成功处理了请求.
    201 请求成功并且服务器创建了新的资源.
    202 服务器已接收请求, 但尚未处理.
    204(无内容) 服务器成功处理了请求, 但没有返回任何内容.
    205(重置内容) 成功处理了请求, 但没有返回任何内容.
    206 服务器成功处理了部分get请求.
    (3) 3xx 重定向
    301 (永久重定向)请求的网页已永久移动到新的位置. 服务器返回此响应时, 会将请求者转移到新的位置.
    302 (临时重定向)服务器从不同的位置的网页响应请求, 但是请求者应该继续使用原有位置来进行以后的请求.
    303  表示由于请求对应的资源存在着另一个URI, 应该使用get方法定向获取请求资源.
    304 表示客户端发送附带条件的请求时, 服务端允许请求访问资源, 但
    因发生请求条件未满足的情况后, 直接返回304.
    307 与302有着相同的含义, 禁止从post变成get.
    (4) 4xx 请求错误
    400 错误请求. 服务器不理解请求中的语法.
    401 未授权, 请求要求身份验证.
    403 服务器拒接请求.
    404 请求的url未找到.
    405 禁用请求中指定的方法.
    (5) 5xx 服务器错误
    500 服务器内部发生错误.
    502 错误网关. 服务器作为代理, 从上游服务器接收到无效响应.
    503 服务器不可用, 服务器目前处于维护状态, 无法使用.
    504 请求超时.
    505 服务器不支持所请求的http版本.

- 转发和重定向的区别

  - **转发**:  转发是服务器的行为. 客户端发送http请求, 服务端接收此请求, 在容器内部完成请求处理和转发动作. 转发的路径必须是同一个Web容器下的url, 中间传递的是第一次的request, 在客户端浏览器上显示的仍然是第一次访问的url路径, 客户端感觉不到服务器做了转发, 转发只有一次请求.
    **重定向**: 客户端发送http请求给服务端, 服务端会返回给浏览器新的url地址, 以及重定向状态码302, 客户端发现是302状态码, 再自动发送一个新的请求给服务端到对应的url上. 客户端浏览器显示的是重定向的地址, 重定向是两次访问.